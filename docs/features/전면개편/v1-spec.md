# 독독 v3 전면 개편 PRD

> 작성일: 2026-02-08
> 상태: Draft — 사용자 승인 대기

---

## 1. 서비스 컨셉

**독독 — 독서를 두드리다. 함께 읽고, 함께 기록하다.**

친구들과 함께하는 독서 모임 전용 기록 웹앱. 회원가입 없이 접속 코드만으로 참여하고, 모임 기록을 갤러리·타임라인으로 한눈에 볼 수 있다.

### 핵심 가치

| 순위 | 가치            | 설명                                                     |
| ---- | --------------- | -------------------------------------------------------- |
| 1    | 간편한 접근     | 회원가입 없이 코드 입력만으로 모임 참여                  |
| 2    | 모임 기록       | 날짜, 책, 발제자, 참여자, 발제문, 사진, 후기를 종합 기록 |
| 3    | 시각적 아카이브 | 갤러리(커버 그리드) + 타임라인(연표) 두 가지 뷰          |
| 4    | 모임 정체성     | 프로필로 모임의 역사와 통계를 한눈에 파악                |

### v2 → v3 핵심 변경점

| 항목        | v2 (현재)                      | v3 (개편)                             |
| ----------- | ------------------------------ | ------------------------------------- |
| 방향        | 개인 독서 기록 중심            | **독서 모임 기록 중심**               |
| 인증        | 초대코드 + Magic Link 이메일   | **접속 코드만 (비로그인)**            |
| AI          | Claude Sonnet/Haiku 6가지 기능 | **제거**                              |
| 뷰          | 홈 타임라인 + 상세 카드        | **갤러리(그리드) + 타임라인(연표)**   |
| 네비게이션  | 하단 5탭                       | **상단 3탭 (갤러리/타임라인/프로필)** |
| 기록 단위   | 개인 record                    | **모임 session (공유)**               |
| 사용자 식별 | Supabase Auth 계정             | **이름 텍스트 입력**                  |
| 사진        | 없음                           | **다중 사진 첨부**                    |

---

## 2. 사용자 및 시나리오

### 타겟 사용자

- 정기적으로 만나는 독서 모임 구성원 (4~10명)
- 모임 기록을 체계적으로 남기고 싶은 사람
- 앱 설치나 회원가입 없이 바로 쓸 수 있는 서비스를 원하는 사람

### 핵심 시나리오

1. **모임 접속**: 접속 코드를 입력하면 해당 모임의 기록 공간으로 진입
2. **기록 작성**: 모임 후 날짜·책·발제자·참여자·발제문·사진·후기를 기록
3. **갤러리 탐색**: 월별 책 커버 그리드로 모임 역사를 한눈에 조망
4. **타임라인 탐색**: 날짜순 목록으로 세부 기록 확인
5. **프로필 확인**: 모임 통계(총 회차, 발제자별 횟수 등) 확인
6. **관리자 모임 생성**: 관리자가 새 모임을 만들고 접속 코드를 공유

### 유저 플로우

```
┌──────────────────────────────────────────┐
│  첫 화면: 접속 코드 입력                  │
│  ┌────────────────────────────┐          │
│  │  코드 입력 → [입장하기]     │          │
│  └────────────────────────────┘          │
│  관리자라면: [새 모임 만들기] 링크         │
└──────────────┬───────────────────────────┘
               │ 코드 유효
               ▼
┌──────────────────────────────────────────┐
│  모임 메인: 상단 탭 네비게이션             │
│                                          │
│  [갤러리]  [타임라인]  [프로필]            │
│                                          │
│  ┌──────────────────────────────┐        │
│  │  갤러리 뷰 (기본)             │        │
│  │  월별 책 커버 그리드           │        │
│  │  ┌───┬───┬───┐              │        │
│  │  │📚│📚│📚│              │        │
│  │  ├───┼───┼───┤              │        │
│  │  │📚│📚│📚│              │        │
│  │  └───┴───┴───┘              │        │
│  └──────────────────────────────┘        │
│                                          │
│  [+] FAB 버튼 → 새 기록 작성             │
└──────────────────────────────────────────┘
               │
               ▼
┌──────────────────────────────────────────┐
│  기록 작성 / 수정 폼                      │
│                                          │
│  - 모임 날짜 (DatePicker)                │
│  - 책 검색 (카카오 API)                   │
│  - 회차 (자동 증가 또는 수동)             │
│  - 발제자 (이름 입력/자동완성)            │
│  - 참여자 (이름 태그 입력/자동완성)       │
│  - 발제문 (긴 텍스트)                     │
│  - 사진 첨부 (다중, Supabase Storage)    │
│  - 글/후기 (긴 텍스트)                    │
│                                          │
│  [저장] [취소]                            │
└──────────────────────────────────────────┘
```

---

## 3. 인증 & 접근 모델

### 접속 코드 방식

- **회원가입 없음** — 코드 입력만으로 모임 공간 진입
- **접속 코드**: 모임별 고유 문자열 (예: `dokdok2026`)
- **코드 저장**: 브라우저 쿠키/localStorage에 저장하여 재방문 시 자동 진입
- **관리자**: 비밀번호로 관리자 인증 → 모임 생성/설정 변경 권한

### 관리자 기능

| 기능      | 설명                                          |
| --------- | --------------------------------------------- |
| 모임 생성 | 모임명, 설명, 접속 코드, 관리자 비밀번호 설정 |
| 모임 수정 | 이름, 설명, 커버 이미지 변경                  |
| 모임 삭제 | 모든 기록 포함 삭제 (확인 필요)               |
| 코드 변경 | 접속 코드 재설정                              |

### 보안 모델

- DB 접근: Server Components / API Routes에서만 (클라이언트 직접 접근 없음)
- RLS: 사용하지 않음 (Auth 없으므로) → 서버 사이드에서 접속 코드 검증
- Supabase: Service Role Key로 서버에서만 접근

---

## 4. 디자인 방향

### 테마: 현재 디자인 시스템 유지

- **라이트 테마** (인디고 + 앰버)
- 레이아웃/구조만 참고 앱(리포브) 따라감
- 모바일 퍼스트 (max-width: 480px → 반응형 확장)

### 레이아웃

```
┌─────────────────────────────┐
│  모임명        🔍  ⚙️       │ ← 상단 헤더
├─────────────────────────────┤
│  [갤러리] [타임라인] [프로필] │ ← 탭 네비게이션
├─────────────────────────────┤
│                             │
│     메인 콘텐츠 영역         │
│                             │
│                             │
│                             │
│                         [+] │ ← FAB (새 기록)
└─────────────────────────────┘
```

### 컴포넌트 스타일 (기존 디자인 시스템 활용)

| 요소      | 스타일                                |
| --------- | ------------------------------------- |
| 카드      | `rounded-[20px]` + 그림자             |
| 버튼      | `rounded-[14px]`, h-12                |
| 입력 필드 | `border-0 bg-input`, h-12             |
| 탭        | `bg-white/80 backdrop-blur` 상단 고정 |
| 책 커버   | `rounded-[12px]` + 그림자             |
| FAB       | `rounded-full` 56px, primary color    |

---

## 5. 핵심 기능

### 5.1 접속 코드 입력 (첫 화면)

- 중앙 정렬 로고 + 코드 입력 필드
- 코드 입력 → 유효성 검증 → 모임 페이지로 이동
- 최근 접속한 모임 코드 기억 (localStorage)
- "새 모임 만들기" 링크 (관리자용)

### 5.2 갤러리 뷰 (메인 탭)

참고: 리포브 갤러리 화면

- **월별 그리드 레이아웃**: 큰 연월 텍스트 + 책 커버 이미지 격자
- 각 셀: 책 커버 이미지 (탭하면 기록 상세로)
- 월 구분선에 연도/월 표시
- 필터: 날짜순(기본) / 최신순
- 책 커버 없으면 제목 텍스트 카드 대체

### 5.3 타임라인 뷰

참고: 리포브 타임라인 화면

- **연월별 섹션**: `2026.02` 등 헤더
- 각 항목:
  - 날짜 (일, 요일)
  - 책 커버 이미지 (작은 썸네일)
  - 책 제목 · 저자 · 출판연도
  - 회차 표시 (예: `3rd`)
  - 발제자
  - 참여자 수
- 항목 탭 → 기록 상세 페이지

### 5.4 프로필 뷰

참고: 리포브 프로필 화면 (독서 모임 버전)

- **모임 프로필 카드**
  - 모임 커버 사진
  - 모임 이름 · 설명
- **통계 요약**
  - 총 기록 수 (모임 회차)
  - 총 참여자 수
  - 발제자 수
- **발제자 통계 차트**
  - 막대 그래프: 발제자별 발제 횟수
  - 가장 많이 발제한 사람 하이라이트
- **최근 기록** 목록 (최근 3~5개)
- **관리자 영역** (관리자 인증 시)
  - 모임 설정 편집
  - 접속 코드 공유

### 5.5 기록(세션) CRUD

#### 기록 필드

| 필드              | 타입      | 필수 | 설명                             |
| ----------------- | --------- | ---- | -------------------------------- |
| session_date      | DATE      | O    | 모임 날짜                        |
| book              | FK(books) | O    | 책 (카카오 API 검색)             |
| session_number    | INTEGER   | -    | 회차 (자동 계산 가능)            |
| presenter         | TEXT      | -    | 발제자 이름                      |
| participants      | TEXT[]    | -    | 참여자 이름 목록                 |
| presentation_text | TEXT      | -    | 발제문 (긴 텍스트)               |
| photos            | TEXT[]    | -    | 사진 URL 목록 (Supabase Storage) |
| content           | TEXT      | -    | 후기/글 (긴 텍스트)              |

#### CRUD 동작

- **Create**: FAB [+] 버튼 → 기록 작성 폼
- **Read**: 갤러리/타임라인에서 항목 탭 → 기록 상세 페이지
- **Update**: 기록 상세 → 수정 버튼 → 편집 폼
- **Delete**: 기록 상세 → 삭제 버튼 (확인 다이얼로그)

### 5.6 기록 상세 페이지

- 상단: 책 커버 이미지 (큰 사이즈)
- 책 정보: 제목, 저자, 출판사, 설명
- 모임 정보: 날짜, 회차
- 발제자 / 참여자
- 발제문 (접기/펼치기)
- 사진 갤러리 (슬라이드/그리드)
- 후기/글
- 수정/삭제 버튼

### 5.7 도서 검색

- 기존 카카오 도서 검색 API 유지
- 검색 결과: 커버, 제목, 저자, 출판사
- 선택하면 books 테이블에 캐싱
- 검색 결과에 없는 책 → 수동 입력 옵션

### 5.8 이미지 업로드

- Supabase Storage 사용
- 세션 기록당 다중 이미지 첨부
- 이미지 리사이징: 최대 1200px 너비
- 허용 포맷: JPG, PNG, WebP
- 최대 5MB/장, 최대 10장/기록

---

## 6. 라우팅 설계

> 보안: URL에 접속 코드 노출 방지. 코드는 입력 시에만 사용하고, 이후 club_id(UUID) 기반 라우팅.

```
/                           → 접속 코드 입력 페이지
/admin/new                  → 새 모임 생성 (관리자)
/club/[id]/                 → 모임 메인 (갤러리 뷰 기본)
/club/[id]/timeline         → 타임라인 뷰
/club/[id]/profile          → 모임 프로필
/club/[id]/session/new      → 새 기록 작성
/club/[id]/session/[sid]    → 기록 상세
/club/[id]/session/[sid]/edit → 기록 수정
/club/[id]/settings         → 모임 설정 (관리자)
```

### 접근 흐름

1. `/` 에서 접속 코드 입력 → API로 코드 검증 → club_id 반환
2. httpOnly 쿠키에 `club_id` 저장 (secure, sameSite=Lax, 30일 만료)
3. `/club/[id]/*` 로 리다이렉트
4. 이후 접속 시 쿠키의 club_id로 자동 진입

### 미들웨어

- `/club/[id]/*` 경로 접근 시 → 쿠키에서 club_id 확인 + URL의 id와 일치 검증
- 쿠키 없거나 불일치 → `/` (코드 입력 페이지)로 리다이렉트
- 접속 코드 입력 API: IP당 5회/분 rate limit (brute-force 방어)

---

## 7. 데이터베이스 스키마

### 전면 재구축 (기존 테이블 전부 DROP → 새로 생성)

> 기존 데이터 불필요. 깨끗하게 새 스키마로 시작.

```sql
-- 기존 테이블 전부 삭제
DROP TABLE IF EXISTS collection_records CASCADE;
DROP TABLE IF EXISTS collections CASCADE;
DROP TABLE IF EXISTS session_reviews CASCADE;
DROP TABLE IF EXISTS agent_conversations CASCADE;
DROP TABLE IF EXISTS ai_contents CASCADE;
DROP TABLE IF EXISTS reviews CASCADE;
DROP TABLE IF EXISTS sessions CASCADE;
DROP TABLE IF EXISTS group_members CASCADE;
DROP TABLE IF EXISTS reading_groups CASCADE;
DROP TABLE IF EXISTS records CASCADE;
DROP TABLE IF EXISTS invite_codes CASCADE;
DROP TABLE IF EXISTS profiles CASCADE;
DROP TABLE IF EXISTS books CASCADE;

-- ========================================
-- 새 스키마
-- ========================================

-- 독서 모임
CREATE TABLE clubs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  description TEXT,
  cover_image_url TEXT,
  access_code TEXT UNIQUE NOT NULL,
  admin_password_hash TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

-- 도서 캐시
CREATE TABLE books (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  isbn TEXT UNIQUE,
  title TEXT NOT NULL,
  author TEXT,
  publisher TEXT,
  cover_image_url TEXT,
  description TEXT,
  api_source TEXT DEFAULT 'kakao',
  created_at TIMESTAMPTZ DEFAULT now()
);

-- 모임 기록 (핵심 테이블)
CREATE TABLE club_sessions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  club_id UUID NOT NULL REFERENCES clubs(id) ON DELETE CASCADE,
  book_id UUID REFERENCES books(id),

  session_number INTEGER,
  session_date DATE NOT NULL,

  presenter TEXT,
  participants TEXT[] DEFAULT '{}',

  presentation_text TEXT CHECK (length(presentation_text) <= 10000),
  content TEXT CHECK (length(content) <= 5000),
  photos TEXT[] DEFAULT '{}',

  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

-- 멤버 이름 사전 (자동완성용)
CREATE TABLE members (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  club_id UUID NOT NULL REFERENCES clubs(id) ON DELETE CASCADE,
  name TEXT NOT NULL CHECK (length(name) <= 20),
  created_at TIMESTAMPTZ DEFAULT now(),
  UNIQUE(club_id, name)
);

-- 인덱스
CREATE INDEX idx_clubs_access_code ON clubs(access_code);
CREATE INDEX idx_club_sessions_club_id ON club_sessions(club_id);
CREATE INDEX idx_club_sessions_date ON club_sessions(session_date DESC);
CREATE INDEX idx_club_sessions_book_id ON club_sessions(book_id);
CREATE INDEX idx_club_sessions_presenter ON club_sessions(presenter);
CREATE INDEX idx_members_club_id ON members(club_id);
CREATE INDEX idx_books_isbn ON books(isbn);

-- 접속 코드 최소 길이 제약
ALTER TABLE clubs ADD CONSTRAINT chk_access_code_length
  CHECK (length(access_code) >= 4);
```

### CRUD 권한 모델

- **공유 공간**: 접속 코드를 아는 모든 사람이 기록 작성/수정/삭제 가능
- 소규모 친구 모임 특성상 별도 작성자 추적 불필요
- 악의적 수정 방지는 접속 코드 보안으로 담보

### RLS 정책

Auth를 사용하지 않으므로 RLS 비활성화. 모든 DB 접근은 서버 사이드(Server Components / API Routes)에서만 수행. 클라이언트에서 직접 Supabase 호출 금지.

```sql
-- 모든 테이블 RLS 비활성화
ALTER TABLE clubs DISABLE ROW LEVEL SECURITY;
ALTER TABLE books DISABLE ROW LEVEL SECURITY;
ALTER TABLE club_sessions DISABLE ROW LEVEL SECURITY;
ALTER TABLE members DISABLE ROW LEVEL SECURITY;
```

### 보안 요구사항

| 항목            | 정책                                                       |
| --------------- | ---------------------------------------------------------- |
| 접속 코드       | 최소 4자, brute-force 방어 (IP당 5회/분)                   |
| DB 접근         | Service Role Key, 서버 사이드 전용                         |
| SQL             | 반드시 parameterized query (Supabase JS SDK 자동 처리)     |
| 쿠키            | httpOnly, secure, sameSite=Lax, 30일 만료                  |
| 관리자 비밀번호 | bcrypt 해싱, 분실 시 DB 직접 리셋                          |
| 이미지          | Supabase Storage, 최대 1MB/장 (클라이언트 압축), 최대 10장 |

---

## 8. 기술 아키텍처

### 시스템 구조

```
┌──────────────────────────────────────────┐
│          Client (Browser)                 │
│       Next.js 16 (App Router)            │
│    SSR + Client Components               │
└──────────────┬───────────────────────────┘
               │
               ▼
┌──────────────────────────────────────────┐
│          Vercel (Hosting)                 │
│                                          │
│  - Server Components (DB 직접 접근)       │
│  - API Routes (이미지 업로드, 검색)       │
│  - Edge Middleware (코드 검증)            │
└──────────────┬───────────────────────────┘
               │
    ┌──────────┴──────────┐
    ▼                     ▼
┌──────────────┐  ┌───────────────────┐
│  Supabase    │  │  External APIs    │
│              │  │                   │
│  - PostgreSQL│  │  - 카카오 도서 API │
│  - Storage   │  │                   │
│  (이미지)    │  │                   │
└──────────────┘  └───────────────────┘
```

### 제거되는 의존성

| 패키지              | 이유                             |
| ------------------- | -------------------------------- |
| `@anthropic-ai/sdk` | AI 기능 제거                     |
| `@supabase/ssr`     | Auth 제거 (server client만 사용) |

### 추가되는 의존성

| 패키지                     | 용도                 |
| -------------------------- | -------------------- |
| `recharts` 또는 `chart.js` | 발제자 통계 차트     |
| `bcryptjs`                 | 관리자 비밀번호 해싱 |
| `sharp` (선택)             | 이미지 리사이징      |

### 유지되는 스택

- Next.js 16 (App Router)
- TypeScript strict
- Tailwind CSS v4 + shadcn/ui
- Supabase PostgreSQL + Storage
- Vercel 배포
- 카카오 도서 검색 API
- lucide-react (아이콘)

---

## 9. 페이지별 상세 설계

### 9.1 접속 코드 입력 페이지 (`/`)

```
┌──────────────────────────────┐
│                              │
│         [독독 로고]           │
│   독서를 두드리다             │
│                              │
│  ┌────────────────────────┐  │
│  │  접속 코드 입력         │  │
│  └────────────────────────┘  │
│  ┌────────────────────────┐  │
│  │      입장하기           │  │
│  └────────────────────────┘  │
│                              │
│  최근 접속: [독서모임] ←      │
│                              │
│  관리자이신가요? 새 모임 만들기│
│                              │
└──────────────────────────────┘
```

### 9.2 갤러리 뷰 (`/club/[code]/`)

```
┌──────────────────────────────┐
│  독서모임          🔍  ⚙️    │
├──────────────────────────────┤
│  [갤러리]  타임라인  프로필    │
├──────────────────────────────┤
│                              │
│  02                          │
│  2026                        │
│  ┌───────┬───────┬───────┐  │
│  │ 📖    │ 📖    │ 📖    │  │
│  │ 커버   │ 커버   │ 커버  │  │
│  └───────┴───────┴───────┘  │
│                              │
│  01                          │
│  2026                        │
│  ┌───────┬───────┐          │
│  │ 📖    │ 📖    │          │
│  │ 커버   │ 커버   │          │
│  └───────┴───────┘          │
│                              │
│                         [+]  │
└──────────────────────────────┘
```

### 9.3 타임라인 뷰 (`/club/[code]/timeline`)

```
┌──────────────────────────────┐
│  독서모임          🔍  ⚙️    │
├──────────────────────────────┤
│  갤러리  [타임라인]  프로필    │
├──────────────────────────────┤
│                              │
│  2026.02                     │
│  ┌──────────────────────┐   │
│  │ 12  📖 페스트          │   │
│  │ 수  알베르 카뮈 · 2026  │   │
│  │     3rd · 발제: 혜린   │   │
│  └──────────────────────┘   │
│  ┌──────────────────────┐   │
│  │ 07  📖 데미안          │   │
│  │ 금  헤르만 헤세 · 1919  │   │
│  │     2nd · 발제: 민수   │   │
│  └──────────────────────┘   │
│                              │
│  2026.01                     │
│  ┌──────────────────────┐   │
│  │ 15  📖 사피엔스        │   │
│  │ 수  유발 하라리 · 2015  │   │
│  │     1st · 발제: 지영   │   │
│  └──────────────────────┘   │
│                              │
│                         [+]  │
└──────────────────────────────┘
```

### 9.4 프로필 뷰 (`/club/[code]/profile`)

```
┌──────────────────────────────┐
│  독서모임          🔍  ⚙️    │
├──────────────────────────────┤
│  갤러리  타임라인  [프로필]    │
├──────────────────────────────┤
│                              │
│  ┌──────────────────────┐   │
│  │   [모임 커버 사진]     │   │
│  │                       │   │
│  │   독서모임 📖          │   │
│  │   매주 수요일 함께 읽기 │   │
│  └──────────────────────┘   │
│                              │
│   15        8        5       │
│  기록      참여자    발제자   │
│                              │
│  ── 발제자 통계 ──           │
│  혜린  ████████  5회         │
│  민수  ██████    4회         │
│  지영  ████      3회         │
│  수현  ██        2회         │
│  태호  █         1회         │
│                              │
│  ── 최근 기록 ──             │
│  📖 페스트 · 2026.02.12     │
│  📖 데미안 · 2026.02.07     │
│                              │
└──────────────────────────────┘
```

### 9.5 기록 작성/수정 폼

```
┌──────────────────────────────┐
│  ← 새 기록                   │
├──────────────────────────────┤
│                              │
│  모임 날짜                   │
│  ┌────────────────────────┐ │
│  │  2026-02-12            │ │
│  └────────────────────────┘ │
│                              │
│  책 검색                     │
│  ┌────────────────────────┐ │
│  │  🔍 제목으로 검색       │ │
│  └────────────────────────┘ │
│  [선택된 책 카드 표시]        │
│                              │
│  발제자                      │
│  ┌────────────────────────┐ │
│  │  이름 입력 (자동완성)   │ │
│  └────────────────────────┘ │
│                              │
│  참여자                      │
│  ┌────────────────────────┐ │
│  │  [혜린] [민수] [+추가]  │ │
│  └────────────────────────┘ │
│                              │
│  발제문                      │
│  ┌────────────────────────┐ │
│  │  발제 내용을 적어주세요  │ │
│  │                        │ │
│  │                        │ │
│  └────────────────────────┘ │
│                              │
│  사진                        │
│  ┌───┬───┬───┐             │
│  │ + │ 📷│ 📷│             │
│  └───┴───┴───┘             │
│                              │
│  후기/글                     │
│  ┌────────────────────────┐ │
│  │  모임 후기나 하고 싶은   │ │
│  │  말을 적어주세요         │ │
│  └────────────────────────┘ │
│                              │
│  ┌────────────────────────┐ │
│  │        저장하기          │ │
│  └────────────────────────┘ │
└──────────────────────────────┘
```

### 9.6 기록 상세 페이지

```
┌──────────────────────────────┐
│  ← 페스트              ⋮    │
├──────────────────────────────┤
│                              │
│  ┌──────────────────────┐   │
│  │                       │   │
│  │   [책 커버 이미지]     │   │
│  │                       │   │
│  └──────────────────────┘   │
│                              │
│  페스트                      │
│  알베르 카뮈 · 민음사 · 2020 │
│                              │
│  ── 모임 정보 ──             │
│  📅 2026.02.12 (수)          │
│  🔢 3회차                    │
│  🎤 발제: 혜린               │
│  👥 참여: 혜린, 민수, 지영    │
│                              │
│  ── 발제문 ──                │
│  카뮈의 페스트는 전염병이     │
│  한 도시를 휩쓸 때 인간이     │
│  보여주는 다양한 반응을...    │
│  [더보기]                    │
│                              │
│  ── 사진 ──                  │
│  ┌───────┬───────┐          │
│  │ 📷    │ 📷    │          │
│  └───────┴───────┘          │
│                              │
│  ── 후기 ──                  │
│  이번 모임에서 가장 인상      │
│  깊었던 부분은...             │
│                              │
└──────────────────────────────┘
```

---

## 10. 구현 로드맵

### Phase 1: 핵심 골격 (우선)

| Step | 항목            | 설명                                   |
| ---- | --------------- | -------------------------------------- |
| 0    | DB 마이그레이션 | clubs, sessions, members 테이블 생성   |
| 1    | 접속 코드 입력  | 첫 화면 + 코드 검증 + 쿠키 저장        |
| 2    | 모임 레이아웃   | 상단 탭(갤러리/타임라인/프로필) + 헤더 |
| 3    | 기록 CRUD       | 작성/수정/삭제 폼 + 도서 검색 연동     |
| 4    | 타임라인 뷰     | 날짜별 세션 목록                       |
| 5    | 갤러리 뷰       | 월별 책 커버 그리드                    |
| 6    | 기록 상세       | 세션 상세 페이지                       |

### Phase 2: 완성도

| Step | 항목          | 설명                           |
| ---- | ------------- | ------------------------------ |
| 7    | 프로필 뷰     | 모임 정보 + 발제자 통계 차트   |
| 8    | 이미지 업로드 | Supabase Storage + 다중 사진   |
| 9    | 이름 자동완성 | members 테이블 + 자동완성 UI   |
| 10   | 관리자 기능   | 모임 생성/설정 + 비밀번호 인증 |

### Phase 3: 다듬기

| Step | 항목          | 설명                       |
| ---- | ------------- | -------------------------- |
| 11   | 반응형 최적화 | 태블릿/데스크톱 대응       |
| 12   | 검색 기능     | 기록 내 검색 (책/발제자)   |
| 13   | 성능 최적화   | 이미지 최적화, 무한 스크롤 |
| 14   | 배포 + QA     | Vercel 배포 + 테스트       |

---

## 11. 제거 항목 정리

### 삭제할 코드

| 경로                                         | 이유                               |
| -------------------------------------------- | ---------------------------------- |
| `src/app/login/`                             | Magic Link 제거                    |
| `src/app/invite/`                            | 초대 코드 → 접속 코드로 대체       |
| `src/app/onboarding/`                        | 프로필 설정 불필요                 |
| `src/app/(main)/chat/`                       | AI 기능 제거                       |
| `src/app/(main)/record/`                     | 개인 기록 → 모임 세션으로 대체     |
| `src/app/(main)/profile/`                    | 개인 프로필 → 모임 프로필로 대체   |
| `src/app/api/agent/`                         | AI API 전체 제거                   |
| `src/lib/agent/`                             | AI 에이전트 모듈 전체 제거         |
| `src/components/features/agent-panel.tsx`    | AI 패널                            |
| `src/components/features/interview-chat.tsx` | AI 인터뷰                          |
| `src/components/features/star-rating.tsx`    | 평점 제거                          |
| `src/components/features/status-badge.tsx`   | 상태 배지 (읽는중/완독)            |
| `src/components/features/record-card.tsx`    | 개인 기록 카드                     |
| `src/middleware.ts`                          | Auth 미들웨어 → 코드 검증으로 교체 |

### 유지할 코드

| 경로                                      | 이유                            |
| ----------------------------------------- | ------------------------------- |
| `src/components/ui/*`                     | shadcn/ui 공통 컴포넌트         |
| `src/components/features/book-search.tsx` | 도서 검색 UI                    |
| `src/components/features/empty-state.tsx` | 빈 상태 공통                    |
| `src/app/api/books/search/`               | 카카오 도서 검색 API            |
| `src/lib/supabase/`                       | Supabase 클라이언트 (수정 필요) |
| `src/app/globals.css`                     | 테마 변수                       |
| `src/app/layout.tsx`                      | 루트 레이아웃                   |

---

## 12. 비기능 요구사항

| 항목        | 기준                            |
| ----------- | ------------------------------- |
| 첫 로딩     | < 2초 (LCP)                     |
| 이미지 로딩 | lazy loading + blur placeholder |
| 모바일 터치 | 탭 영역 최소 44px               |
| 접근성      | 시멘틱 HTML + aria-label        |
| SEO         | 모임 페이지 OG 메타태그         |
| 오프라인    | 없음 (온라인 전용)              |
| 브라우저    | Chrome, Safari (모바일 우선)    |

---

## 부록: 참고 이미지 매핑

| 참고 이미지        | 독독 적용                    |
| ------------------ | ---------------------------- |
| `ref/갤러리.png`   | 갤러리 뷰 레이아웃           |
| `ref/타임라인.png` | 타임라인 뷰 레이아웃         |
| `ref/평점.png`     | 발제자 통계 차트 (평점 대신) |
| `ref/프로필.png`   | 모임 프로필 뷰               |
